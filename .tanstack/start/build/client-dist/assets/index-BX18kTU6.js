import{j as e,c as i,L as f,u as v,r as c,R as j}from"./main-ClKoHfKt.js";import{C as N,B as n,a as w,b as C,c as k,d as z,S}from"./separator-0gN5VOI3.js";const L={easy:"簡單",medium:"中等",hard:"困難",expert:"專家"},$={mystery:"懸疑",horror:"恐怖",modern:"現代",ancient:"古風",fantasy:"奇幻",emotion:"情感"},I=({script:t,className:d=""})=>e.jsxs(N,{className:i("group overflow-hidden border-2 border-mystery-accent-primary/50 transition-all duration-300 hover:shadow-xl hover:shadow-mystery-accent-gold/50 shadow-xl",d),style:{backgroundColor:"#2a2a2a"},children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:t.coverImage,alt:t.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[t.isNew&&e.jsx(n,{variant:"destructive",className:"bg-mystery-accent-primary hover:bg-mystery-accent-primary text-white",children:"新"}),t.isHot&&e.jsx(n,{className:"bg-mystery-accent-gold hover:bg-mystery-accent-gold text-black font-semibold",children:"熱"})]})]}),e.jsxs(w,{className:"pb-3",style:{backgroundColor:"#2a2a2a"},children:[e.jsx(C,{className:"text-mystery-text-primary text-lg font-bold line-clamp-2",children:t.title}),e.jsx(k,{className:"text-mystery-text-secondary text-sm line-clamp-2",children:t.description})]}),e.jsxs(z,{className:"space-y-4",style:{backgroundColor:"#2a2a2a"},children:[e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-mystery-text-secondary",children:[e.jsx(n,{variant:"outline",className:"border-mystery-accent-primary/30 text-mystery-text-secondary",children:t.playerCount.min===t.playerCount.max?`${t.playerCount.min}人`:`${t.playerCount.min}-${t.playerCount.max}人`}),e.jsxs(n,{variant:"outline",className:"border-mystery-accent-primary/30 text-mystery-text-secondary",children:[t.duration,"分鐘"]}),e.jsx(n,{variant:"outline",className:"border-mystery-accent-primary/30 text-mystery-text-secondary",children:L[t.difficulty]})]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-2 bg-mystery-accent-gold/10 px-3 py-2 rounded-lg border border-mystery-accent-gold/30",children:[e.jsx("span",{className:"text-mystery-accent-gold text-lg",children:"★"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-mystery-accent-gold font-bold text-lg leading-none",children:t.rating}),e.jsx("span",{className:"text-mystery-text-muted text-xs",children:"評分"})]})]})}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.slice(0,3).map(m=>e.jsx(n,{variant:"secondary",className:"text-xs bg-mystery-bg-hover text-mystery-text-muted",children:m},m))}),e.jsx("div",{className:"pt-2",children:e.jsx(n,{className:"bg-mystery-accent-primary/20 text-mystery-accent-secondary border-mystery-accent-primary/30",children:$[t.category]})}),e.jsx(f,{to:"/script/$id",params:{id:t.id},className:"block"})]})]}),A=({scripts:t,className:d=""})=>{const m=v(),[y,x]=c.useState(0),[b,o]=c.useState(!1),l=t.length,h=c.useCallback(s=>{const a=(s-y+l)%l,r=[{x:0,scale:1,z:5,opacity:1,blur:0},{x:160,scale:.85,z:4,opacity:.8,blur:0},{x:280,scale:.7,z:3,opacity:.6,blur:1},{x:-280,scale:.7,z:2,opacity:.6,blur:1},{x:-160,scale:.85,z:3,opacity:.8,blur:0}];return r[a]||r[0]},[y,l]),p=c.useCallback((s,a)=>{s===y?m({to:"/script/$id",params:{id:a}}):(o(!0),x(s),setTimeout(()=>o(!1),5e3))},[y,m]);c.useCallback(()=>{o(!0)},[]),c.useCallback(()=>{o(!1)},[]),c.useEffect(()=>{if(b)return;const s=setInterval(()=>{x(a=>(a+1)%l)},4e3);return()=>clearInterval(s)},[l,b]),c.useEffect(()=>{const s=a=>{a.key==="ArrowLeft"?(a.preventDefault(),o(!0),x(r=>(r-1+l)%l),setTimeout(()=>o(!1),5e3)):a.key==="ArrowRight"&&(a.preventDefault(),o(!0),x(r=>(r+1)%l),setTimeout(()=>o(!1),5e3))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[l]);const g=t.slice(0,5);return e.jsx("section",{className:i("w-full py-16 bg-mystery-bg-secondary/50",d),children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold text-mystery-text-primary mb-4",children:"熱門推薦"}),e.jsx("p",{className:"text-mystery-text-secondary text-lg",children:"玩家最愛的精彩劇本"}),e.jsx(S,{className:"mx-auto mt-6 w-24 bg-mystery-accent-gold"})]}),e.jsx("div",{className:"relative mx-auto max-w-6xl",children:e.jsx("div",{className:"relative h-[480px] flex items-center justify-center overflow-visible",style:{perspective:"1000px"},children:g.map((s,a)=>{const r=h(a),u=a===y;return e.jsx("div",{className:i("absolute w-[320px] cursor-pointer transition-all duration-700 ease-out","hover:scale-105"),style:{transform:`translate(-50%, -50%) translateX(${r.x}px) scale(${r.scale})`,left:"50%",top:"50%",zIndex:r.z,opacity:r.opacity,filter:`blur(${r.blur}px)`},onClick:()=>p(a,s.id),children:e.jsxs("div",{className:"relative h-full",children:[e.jsx("div",{className:"absolute -top-3 -left-3 z-10",children:e.jsx(n,{className:i("w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm shadow-xl border-2",a===0&&"bg-mystery-accent-gold text-black border-yellow-300 animate-pulse",a===1&&"bg-gray-400 text-white border-gray-300",a===2&&"bg-orange-600 text-white border-orange-400",a===3&&"bg-mystery-accent-primary text-white border-mystery-accent-secondary",a===4&&"bg-purple-600 text-white border-purple-400"),children:a+1})}),e.jsxs("div",{className:i("relative h-full rounded-xl overflow-hidden","border-2 transition-all duration-300",u?"border-mystery-accent-gold shadow-2xl shadow-mystery-accent-gold/30":"border-mystery-accent-primary/20 shadow-xl","transform-gpu backdrop-blur-sm"),children:[e.jsx(I,{script:s,className:i("h-full border-0 transition-all duration-300",u&&"ring-2 ring-mystery-accent-gold/50")}),u&&e.jsxs("div",{className:"absolute inset-0 rounded-xl",children:[e.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-mystery-accent-gold/50 animate-pulse"}),e.jsx("div",{className:"absolute -inset-2 rounded-xl bg-gradient-to-r from-mystery-accent-gold/20 to-mystery-accent-secondary/20 blur-xl -z-10"})]})]})]})},s.id)})})})]})})},R=function(){const{hotScripts:d}=j.useLoaderData();return e.jsx("div",{className:"bg-gradient-to-br from-mystery-bg-primary to-mystery-bg-secondary",children:e.jsx(A,{scripts:d})})};export{R as component};
